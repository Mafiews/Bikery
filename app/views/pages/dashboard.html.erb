<%= render 'shared/navbar' %>

<div class="container">
  <div class="row justify-content-between">
      <div class="col-4">
        <h1>user info</h1>
      </div>
      <div class="col-8">
        <div class="col-12">
          <h3>My booking history</h3>
          <% @my_rentals.each do |my_rental| %>
          <div class="notification">
            <% if current_user.photo.attached? %>
              <%= cl_image_tag my_rental.bike.photo.key, class: "avatar-large mb-1" %>
            <% end %>

            <div class="notification-content">
              <p><small><%= my_rental.start_date %> to <%= my_rental.end_date %></small></p>
              <p class="d-inline p-2"><i class="fas fa-bicycle"></i> <%= my_rental.bike.bike_type %></p>
              <p class="d-inline p-2"><i class="fas fa-battery-full"></i> <%= my_rental.bike.condition %></p>
              <p class="d-inline p-2"><i class="fas fa-euro-sign"></i> <%= my_rental.rental_price %></p>
            </div>

            <div class="notification-actions">
              <%= link_to edit_rental_path(my_rental) do%>
                Edit <i class="fas fa-pencil-alt"></i>
              <% end %>
              <%= link_to rental_path(my_rental), method: :delete, data: { confirm: "Are you sure?" } do %>
                Delete <i class="far fa-trash-alt"></i>
              <% end %>
            </div>
          </div>
          <% end %>

        </div>
        <div class="col-12">
        <% if @ask_rentals.length >0 %>
          <h3>Waiting request</h3>
          <% @ask_rentals.each do |r_request| %>
            <div class="notification">
              <% if r_request.user.photo.attached? %>
                <%= cl_image_tag r_request.user.photo.key, class: "avatar mb-1" %>
              <% else %>
                <%= image_tag "https://oozou.com/assets/placeholder-e61f8e40396b6f3d78281bfa3b2d5ca202616f0e3f9931d451a49d4c2ddfcfea.jpg", alt: "empty-avatar", class: "avatar mb-1" %>
              <% end %>
              <div class="notification-content">
                <p><small><%= r_request.start_date %> to <%= r_request.end_date %></small></p>
                <p class="d-inline p-2"><i class="fas fa-bicycle"></i> <%= r_request.bike.bike_type %></p>
                <p class="d-inline p-2"><i class="fas fa-battery-full"></i> <%= r_request.bike.condition %></p>
                <p class="d-inline p-2"><i class="fas fa-euro-sign"></i> <%= r_request.rental_price %></p>
              </div>

              <div class=“notification-actions”>
                <%= button_to "confirm", rental_update_confirmation_path(r_request, validated:'true'), method: :post  %>
                  Accept <i class=“far fa-check-square”></i>

              </div>

            </div>
          <% end %>
        <% end %>
        </div>
      </div>
  </div>
</div>
