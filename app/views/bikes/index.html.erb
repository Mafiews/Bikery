<div class="container">
  <div class="row justify-content-center">
    <h1>See available bikes around you</h1>
  </div>
  <div class="row justify-content-center">
    <%= link_to 'Back to homepage', root_path, class: "btn btn-success text-white" %>
  </div>

  <div class="row justify-content-center">
    <% @bikes.each do |bike| %>
      <div class="col-12 col-lg-4">
        <div class="card-product">
          <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
          <div class="card-product-infos">
            <h2><%= bike.model %></h2>
            <h5><i class="fas fa-bicycle"></i> <%= bike.bike_type %></h5>
            <h5><i class="fas fa-battery-full"></i> <%= bike.condition %></h5>
            <h5><i class="fas fa-euro-sign"></i> <%= bike.price %></h5>
          </div>
          <%= link_to "", bike_path(bike), class: 'card-link' %>
        </div>
      </div>
    <% end %>

    <div class="col-12 col-lg-8">
      <div id='map' style='width: 550px; height: 500px;'></div>
      <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
      <link
      rel="stylesheet"
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css"
      type="text/css"
      />
      <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
      <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
      <div id="map"></div>

      <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoibWFmaWV3cyIsImEiOiJja2RhYjJzaTQwdjV0MnlvZG93dHJjOG5yIn0.XnI3woDvnCIOrLjHD1PBnQ';
      var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [2.379998, 48.865127],
      zoom: 15
      });

      map.addControl(
      new MapboxGeocoder({
      accessToken: mapboxgl.accessToken,
      mapboxgl: mapboxgl
      })
      );

      // Add zoom and rotation controls to the map.
      map.addControl(new mapboxgl.NavigationControl());
      </script>
    </div>
  </div>
</div>
